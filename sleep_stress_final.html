<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Sleep &amp; stress</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-solid fa-spa"></span>
     
  </a>
</li>
<li>
  <a href="report.html">Report</a>
</li>
<li>
  <a href="data.html">Data</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Lifestyle Factors Analyses
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="hormone_final.html">Hormone &amp; Symptoms</a>
    </li>
    <li>
      <a href="sleep_stress_khue.html">Sleep &amp; Stress</a>
    </li>
    <li>
      <a href="exercise_hormone.html">Exercise</a>
    </li>
  </ul>
</li>
<li>
  <a href="p8105_final_project_proposal.html">Proposal</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">Meet the Team</a>
</li>
<li>
  <a>
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Sleep &amp; stress</h1>

</div>


<p><strong>View the sleep time for different participants in each study
interval</strong></p>
<pre class="r"><code># plot the mean timein bed in hour
sleep_stress_df |&gt;
  filter(!is.na(study_interval)) |&gt;
  ggplot(aes(x = id, y = timeinbed_mean/60, group = id, color = id))+
  geom_boxplot()+
  facet_grid(study_interval~.) +
  labs(
    x = &quot;Participant&quot;,
    y = &quot;Average time in bed (hours)&quot;
  ) </code></pre>
<p><img src="sleep_stress_final_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>The average sleep time for each person is different each study
interval and varied across participants. In 2022, some participants
slept less than 5 hours and some slept more than 8 hours. In 2024, most
participants have better sleep length, 7-8 hours.</p>
<pre class="r"><code>sleep_stress_df|&gt;
  group_by(phase, id) |&gt;
  summarize(
    timeinbed = mean(timeinbed_mean/60)
  )|&gt; 
  ggplot(aes(x = phase, y = timeinbed, fill = phase)) +
  geom_violin(alpha = 0.5) +
  geom_boxplot(width = 0.2) +
  labs(
    title = &quot;Sleep time Across Menstrual Cycle Phases&quot;,
    x = &quot;Menstrual Cycle Phase&quot;,
    y = &quot;Time in bed (hrs)&quot;
  ) +
    theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
<p><img src="sleep_stress_final_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Menstruators spent more time in bed during menstrual time but their
deep sleep hours were lowest. This showed that the physical exhaustion
during menstrual days requiring them to rest but preventing them from
having a restorative sleep quality. Follicular time is when menstruators
feel most energetic and spent less time in bed but having much better
deep sleep.</p>
<p>We explore the changes of the stress score with the menstrual cycle.
The participants slept best during the menstrual time, probably a good
sign to rest well during this time. The lowest sleep score were recorded
during ovulation/ fertility time in which the increased estrogen and lh
levels may contribute to this low sleep quality. The higher stress score
the less stressful people experience. In this study, the participants
showed the least stressful during folicular period , as the bodies are
full of energy. The most stressful time is during luteal period.</p>
<pre class="r"><code># plot the sleep vs stress score by phases
plot_1 = 
  sleep_stress_df |&gt;
  group_by(phase) |&gt;
  summarize(
    mean_sleep_score = mean(sleep_score, na.rm = TRUE),
    mean_stress_score = mean(stress_score, na.rm = TRUE),
    .groups = &quot;drop&quot;
  ) |&gt;
  pivot_longer(
    cols = starts_with(&quot;mean_&quot;),
    names_to = &quot;metric&quot;,
    values_to = &quot;value&quot;
  ) |&gt;
  mutate(
    metric = recode(metric,
                    mean_sleep_score  = &quot;Sleep Score&quot;,
                    mean_stress_score = &quot;Stress Score&quot;)
  ) |&gt;
  ggplot(aes(x = phase, y = value, color = metric, group = metric)) +
    geom_smooth(linewidth= 1) +
    geom_point(size = 3) +
    labs(color = &quot;Metric&quot;, y = &quot;Mean Score&quot;, x = &quot;Phase&quot;) +
    labs(
    x = &quot;Menstrual Cycle Phase&quot;,
    y = &quot;Score&quot;
  ) +
    theme_minimal() +
  theme(legend.position = &quot;bottom&quot;,
    axis.text.x = element_text(angle = 45, hjust = 1))
# plot the hormone changes
coeff = 5.5
plot_2  =
  sleep_stress_df |&gt;
  group_by(phase) |&gt;
  summarize(
    mean_lh = mean(lh, na.rm = TRUE),
    mean_estrogen = mean( estrogen, na.rm = TRUE),
    .groups = &quot;drop&quot;
  ) |&gt;
  pivot_longer(
    cols = starts_with(&quot;mean_&quot;),
    names_to = &quot;metric&quot;,
    values_to = &quot;value&quot;
  ) |&gt;
  mutate(
    metric = recode(metric,
                    mean_lh           = &quot;LH&quot;,
                    mean_estrogen     = &quot;Estrogen&quot;)
  ) |&gt;
  ggplot(aes(x = phase, y = value, color = metric, group = metric)) +
    geom_smooth(linewidth= 1) +
    geom_point(size = 3) +
    labs(color = &quot;Metric&quot;, y = &quot;level&quot;, x = &quot;Phase&quot;) +
    labs(
    x = &quot;Menstrual Cycle Phase&quot;,
    y = &quot;Level&quot;
  ) +
    theme_minimal() +
  theme(legend.position = &quot;bottom&quot;,
    axis.text.x = element_text(angle = 45, hjust = 1))
# Plot the time in bed and deep sleep in minutes in phases
plot_3 = 
  sleep_stress_df |&gt;
  group_by(phase)|&gt;
   summarize(
     mean_timeinbed = mean(timeinbed_mean/60, na.rm = TRUE),
    mean_deep_sleep_in_minutes = mean((deep_sleep_in_minutes/60)*coeff, na.rm = TRUE)
             )|&gt;
  pivot_longer(
    cols = starts_with(&quot;mean_&quot;),
    names_to = &quot;metric&quot;,
    values_to = &quot;value&quot;
  ) |&gt;
  mutate(
    metric = recode(metric,
                    mean_timeinbed             = &quot;Time in bed (hours)&quot;,
                    mean_deep_sleep_in_minutes = &quot;Deep sleep (hours)&quot;)
  ) |&gt;
  ggplot(aes(x = phase, y = value, color = metric, group = metric)) +
    geom_smooth(linewidth= 1) +
    geom_point(size = 3) +
    labs(color = &quot;Metric&quot;, y = &quot;level&quot;, x = &quot;Phase&quot;) +
    labs(
    x = &quot;Menstrual Cycle Phase&quot;,
    y = &quot;Level&quot;
  ) +
  scale_y_continuous(
    
    # Features of the first axis
    name = &quot;Time in bed (hours)&quot;,
    # Add a second axis and specify its features
    sec.axis = sec_axis(~./coeff, name=&quot;Deep sleep (hours)&quot;)
  ) +
    theme_minimal() +
  theme(legend.position = &quot;bottom&quot;,
    axis.text.x = element_text(angle = 45, hjust = 1))
plot_1 + plot_2 + plot_3</code></pre>
<p><img src="sleep_stress_final_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p><strong>View the stress and sleep score across menstrual cycle phases
for each ethnicity</strong></p>
<pre class="r"><code>sleep_stress_df |&gt;
  group_by(phase, ethnicity) |&gt;
  summarize(
    mean_sleep_score = mean(sleep_score, na.rm = TRUE),
    mean_stress_score = mean(stress_score, na.rm = TRUE),
    .groups = &quot;drop&quot;
  ) |&gt;
  pivot_longer(
    cols = starts_with(&quot;mean_&quot;),
    names_to = &quot;metric&quot;,
    values_to = &quot;value&quot;
  ) |&gt;
  drop_na()|&gt;
  mutate(
    metric = recode(metric,
                    mean_sleep_score  = &quot;Sleep Score&quot;,
                    mean_stress_score = &quot;Stress Score&quot;)
  ) |&gt;
  ggplot(aes(x = phase, y = value, color = ethnicity, group = ethnicity)) +
    geom_line(size = 1) +
    geom_point(size = 3) +
    facet_grid(~ metric) +
    labs(color = &quot;Ethnicity&quot;, y = &quot;Mean Score&quot;, x = &quot;Phase&quot;) +
    labs(
    title = &quot;stress and sleep score Across Menstrual Cycle Phases&quot;,
    x = &quot;Menstrual Cycle Phase&quot;,
    y = &quot;score&quot;
  ) +
    theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
<p><img src="sleep_stress_final_files/figure-html/unnamed-chunk-5-1.png" width="672" />
Our dataset are from two studies in two different times, year 2022 and
year 2024 in which the 2024 cohort is a subset from 2022 cohorts.
Therefore the assumptions of independence is violated so we cannot use
statistical tests that required independence assumptions. Instead, we
used generalized linear mixed effects model to evaluate the significant
different of stress score and sleep score between menstrual phases.</p>
<pre class="r"><code>m1 = lmer(stress_score ~ phase +(1 | id) + (1| study_interval), data = sleep_stress_df)
tidy(m1, effects = &quot;fixed&quot;, conf.int = TRUE)|&gt;
  select(term, estimate, std.error,p.value, conf.low, conf.high) |&gt;
  mutate(
  significant = ifelse(p.value &lt; 0.05, &quot;Yes&quot;, &quot;No&quot;)) |&gt;
  knitr::kable(
    title = &quot;Linear mixed effect models for stress score variation by menstrual phases&quot;,
    digits = 3)</code></pre>
<table>
<colgroup>
<col width="21%" />
<col width="12%" />
<col width="13%" />
<col width="10%" />
<col width="12%" />
<col width="13%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">p.value</th>
<th align="right">conf.low</th>
<th align="right">conf.high</th>
<th align="left">significant</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">76.654</td>
<td align="right">0.785</td>
<td align="right">0.000</td>
<td align="right">74.828</td>
<td align="right">78.479</td>
<td align="left">Yes</td>
</tr>
<tr class="even">
<td align="left">phasefollicular</td>
<td align="right">0.120</td>
<td align="right">0.249</td>
<td align="right">0.630</td>
<td align="right">-0.368</td>
<td align="right">0.608</td>
<td align="left">No</td>
</tr>
<tr class="odd">
<td align="left">phasefertility</td>
<td align="right">-0.690</td>
<td align="right">0.247</td>
<td align="right">0.005</td>
<td align="right">-1.175</td>
<td align="right">-0.206</td>
<td align="left">Yes</td>
</tr>
<tr class="even">
<td align="left">phaseluteal</td>
<td align="right">-0.865</td>
<td align="right">0.231</td>
<td align="right">0.000</td>
<td align="right">-1.318</td>
<td align="right">-0.411</td>
<td align="left">Yes</td>
</tr>
</tbody>
</table>
<pre class="r"><code>m2 = lmer(sleep_score ~ phase +(1 | id), data = sleep_stress_df)
tidy(m2, effects = &quot;fixed&quot;, conf.int = TRUE)|&gt;
  select(term, estimate, std.error,p.value, conf.low, conf.high) |&gt;
  mutate(
  significant = ifelse(p.value &lt; 0.05, &quot;Yes&quot;, &quot;No&quot;)) |&gt;
  knitr::kable(digits = 3)</code></pre>
<table>
<colgroup>
<col width="21%" />
<col width="12%" />
<col width="13%" />
<col width="10%" />
<col width="12%" />
<col width="13%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">p.value</th>
<th align="right">conf.low</th>
<th align="right">conf.high</th>
<th align="left">significant</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">77.436</td>
<td align="right">0.707</td>
<td align="right">0</td>
<td align="right">76.007</td>
<td align="right">78.865</td>
<td align="left">Yes</td>
</tr>
<tr class="even">
<td align="left">phasefollicular</td>
<td align="right">-1.021</td>
<td align="right">0.282</td>
<td align="right">0</td>
<td align="right">-1.575</td>
<td align="right">-0.467</td>
<td align="left">Yes</td>
</tr>
<tr class="odd">
<td align="left">phasefertility</td>
<td align="right">-1.336</td>
<td align="right">0.280</td>
<td align="right">0</td>
<td align="right">-1.886</td>
<td align="right">-0.786</td>
<td align="left">Yes</td>
</tr>
<tr class="even">
<td align="left">phaseluteal</td>
<td align="right">-1.108</td>
<td align="right">0.262</td>
<td align="right">0</td>
<td align="right">-1.622</td>
<td align="right">-0.594</td>
<td align="left">Yes</td>
</tr>
</tbody>
</table>
<pre class="r"><code>m3 = lmer(timeinbed_mean ~ phase +(1 | id), data = sleep_stress_df)
tidy(m3, effects = &quot;fixed&quot;, conf.int = TRUE)|&gt;
  select(term, estimate, std.error,p.value, conf.low, conf.high) |&gt;
  mutate(
  significant = ifelse(p.value &lt; 0.05, &quot;Yes&quot;, &quot;No&quot;)) |&gt;
  knitr::kable(digits = 3)</code></pre>
<table>
<colgroup>
<col width="21%" />
<col width="12%" />
<col width="13%" />
<col width="10%" />
<col width="12%" />
<col width="13%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">p.value</th>
<th align="right">conf.low</th>
<th align="right">conf.high</th>
<th align="left">significant</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">459.022</td>
<td align="right">5.401</td>
<td align="right">0.000</td>
<td align="right">448.133</td>
<td align="right">469.911</td>
<td align="left">Yes</td>
</tr>
<tr class="even">
<td align="left">phasefollicular</td>
<td align="right">-5.952</td>
<td align="right">3.180</td>
<td align="right">0.061</td>
<td align="right">-12.185</td>
<td align="right">0.282</td>
<td align="left">No</td>
</tr>
<tr class="odd">
<td align="left">phasefertility</td>
<td align="right">-10.394</td>
<td align="right">3.159</td>
<td align="right">0.001</td>
<td align="right">-16.586</td>
<td align="right">-4.202</td>
<td align="left">Yes</td>
</tr>
<tr class="even">
<td align="left">phaseluteal</td>
<td align="right">-4.595</td>
<td align="right">2.953</td>
<td align="right">0.120</td>
<td align="right">-10.384</td>
<td align="right">1.195</td>
<td align="left">No</td>
</tr>
</tbody>
</table>
<pre class="r"><code>#  model
m4 &lt;- lmer(stress_score ~ phase + deep_sleep_in_minutes +
           timeinbed_mean + total_active_min + moodswing_score +(1 | id), data = sleep_stress_df)
tidy(m4, effects = &quot;fixed&quot;, conf.int = TRUE)|&gt;
  select(term, estimate, std.error, conf.low, conf.high,p.value) |&gt;
  mutate(
  significant = ifelse(p.value &lt; 0.05, &quot;Yes&quot;, &quot;No&quot;)) |&gt;
  knitr::kable(digits = 3)</code></pre>
<table>
<colgroup>
<col width="27%" />
<col width="11%" />
<col width="12%" />
<col width="11%" />
<col width="12%" />
<col width="10%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">conf.low</th>
<th align="right">conf.high</th>
<th align="right">p.value</th>
<th align="left">significant</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">73.254</td>
<td align="right">1.848</td>
<td align="right">69.591</td>
<td align="right">76.917</td>
<td align="right">0.000</td>
<td align="left">Yes</td>
</tr>
<tr class="even">
<td align="left">phasefollicular</td>
<td align="right">-1.166</td>
<td align="right">0.866</td>
<td align="right">-2.869</td>
<td align="right">0.536</td>
<td align="right">0.179</td>
<td align="left">No</td>
</tr>
<tr class="odd">
<td align="left">phasefertility</td>
<td align="right">-0.964</td>
<td align="right">0.854</td>
<td align="right">-2.643</td>
<td align="right">0.714</td>
<td align="right">0.259</td>
<td align="left">No</td>
</tr>
<tr class="even">
<td align="left">phaseluteal</td>
<td align="right">-0.840</td>
<td align="right">0.753</td>
<td align="right">-2.321</td>
<td align="right">0.641</td>
<td align="right">0.265</td>
<td align="left">No</td>
</tr>
<tr class="odd">
<td align="left">deep_sleep_in_minutes</td>
<td align="right">0.032</td>
<td align="right">0.016</td>
<td align="right">0.001</td>
<td align="right">0.063</td>
<td align="right">0.043</td>
<td align="left">Yes</td>
</tr>
<tr class="even">
<td align="left">timeinbed_mean</td>
<td align="right">0.009</td>
<td align="right">0.004</td>
<td align="right">0.002</td>
<td align="right">0.016</td>
<td align="right">0.013</td>
<td align="left">Yes</td>
</tr>
<tr class="odd">
<td align="left">total_active_min</td>
<td align="right">-0.009</td>
<td align="right">0.008</td>
<td align="right">-0.024</td>
<td align="right">0.006</td>
<td align="right">0.232</td>
<td align="left">No</td>
</tr>
<tr class="even">
<td align="left">moodswing_score</td>
<td align="right">-0.199</td>
<td align="right">0.255</td>
<td align="right">-0.701</td>
<td align="right">0.303</td>
<td align="right">0.436</td>
<td align="left">No</td>
</tr>
</tbody>
</table>
<pre class="r"><code># etracting coefficient
intercept_values = random.effects(m1)
fitted_stress_score = fitted.values(m1)
# check the residuals
qqnorm(residuals(m3)) </code></pre>
<p><img src="sleep_stress_final_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
